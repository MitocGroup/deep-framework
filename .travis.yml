language: node_js
sudo: required
git:
  depth: 1
cache:
  bundler: true
  directories:
    - node_modules
    - "$(npm root -g)"
    - "$(npm config get prefix)/bin"
branches:
  only:
    - master
    - stage
    - test
    - dev
env:
  global:
    - DEEP_NO_INTERACTION=1
    # AWS_ACCOUNT_ID=[secure]
    - secure: "A8xGRRv80jyGkz9i52ZWR1G5S2syoct/KtCjPCaqlmXxwAo7qY+4mvFv2ARPGTmyPm2frKAHQCEN0kUWXBTioCqSGjvGtATCu9QkGarnqDFyCzBaILuK/rsWcI8jW0ALKf8ycjjzs5z3qNbem+whPQmZshx8YyaX0DucQNBfVIfT1uBNOTL4oPmxqWhXWMzASAQlG2ojfduiI0OFbZrIjIcQ7gY2pYKU/KdJj563hVc7XpeuN1lVylgTcgQIlgtf84W5qGewpbNuPQOrAFpdk+6nGzKiL0Vx6icjRk21Lh0N1R71CV0CkLAXzgc0y/JtkDf9KJM6auDs5EHEnw2lJxV+nA+L6T0446KmrZsahwa1aWf1UxxK4Xpd3QCjjXhEx0oALqP+v+7yLVSvIY/JgTVjITGA925Y5NEvjlH5jVkcQruJ2aBKP36p5ofvflQkdItYhq7OvxQt1Eg0Ra6P3uLnEieU0+P4kPE2YDKym9sZESIDNyMfLQ3xE3weNXf+WVbfZD5fCtXMqHqk4x4mdUvvh2vtl7H49cTGj9vs3ztToiKIcOUnyfOrw7/+lYV8nGJUEZynafu8gTZuZZ+3btpjjRh/mar3g7H7ly397bNM51VufMSwl2/5rFoCEqhHKHo3id4F0/lIwnGgd1e7s3nFOTCWMqcoqcHOirAGMNw="
    # AWS_ACCESS_KEY_ID=[secure]
    - secure: "X5npa9ixelLWtZMNhn3yLD2Sly4KlgUkunemggGhDWDKG+TpGmwo5sDxV/Sf7XHEAJO2A1Iw8V4V1PON3aC2nm88Dngg/GZHXRNAT0UlXMmvVub8gHG9WVCSAxulBMOGPN3Nn1y4fzESu+hh0pnMVQ+wUTE4SQeZxJy1SH9yQW/95724f1887FRWATObzYnHMUBMZoeiGn03ws+LyPJ06NyOvls5ujstZW+jsYBPgJgponQjamqRCsK2a4JzPSrtMZptMzHCX2JuC73OurYdtk2dr+8RPdFah0wvH7aDbt9a3gSFbhpAN5bxm+OOe+KJwupZiHmJipS+mWlvaMFvFHMphxGGgR9i+D/ul1pzxNeTRIAvobICTVpMm6guNEm34AN9uUmI7ZHbWZOMMG1APT/vFdSuFl7me6uqzStUfWLyEbZQ0kKN/yzDGH36/NJj9iRWMHXXVvLGV+BC7HIiPQ1k/cK3Cn9UN5X++EclUobEt4FcrhYraYaIBi6C8w4z9VxePZdsRiu3dZTuSwqT5cc/0qbGjvpFdXcx03YzwpJvMpyEo42AEwMYkvdLU4+y3oq0RcpLlK/Vv1RxCFlVzMZe18e4oJp5H8LTfQUsiRAI018XxN4St4Mp+J9zeJT6NoK21Vn/1mo5BmEiZ32Wb4U+EKnum0aqwIBad2uCwSg="
    # AWS_SECRET_ACCESS_KEY=[secure]
    - secure: "ar2z1UZSqr3Ze5N9D5bmm2xLvvn22SlBdkaqNsC9E7U8LSq0AHwm6LkHZyp7p36I3W/ILEbeI0qTJCVVirEQI9S0BUviNZ1rkJkwsl7akoFvviRsFhw4qJjWEQq35nG5nmRdVOXlMvSaa+HZ3FKJz0acV51sx94cUL6zMRse6yXwbRRPY0yu4/MMrVxuM61/4WCShCSjCunCPdhGyIqHDDRxJf/X6bEQif1441Ceu9j9+fNCALzfXd3za0Bj0nHASMzjGhU40ifZYDXSmiKt4rSwNfJv/iCnFuQ6z5WUzd558D/iFIzJB6dI8CENdRATi+WqO7SE4kgbVJI3vZyKAdD8KGo2zuMfeRg2cytuSdgUtDPIejR3tqaQzbp3g7XlQAECT7j8eMdZqdGgYlbfW5jF0Q093mnrIvofRd4/0c/lp7K5desjT3+Rugsg1ijetUiU441U6oNMEimM34zFZkghOP/JDeHpfk/EWeQGO1eWcsCs/AfdPWLj1tOfPW5pFXnMZgLHaVunOnv8tNyJ0Bd0dBmjbLPWO2d4Qx7U4N9XmjCkihBlsQ640pHRyZofjftABYp0k9SBIy6nQPfALCTVcvivhmIPo3f58Hu0YgzBFvlHdnZAxdXDtdoO4/em8QnoVA8qbgdn5FLJwCLjnjOG1mDGHXrWaMNLXMOsn4c="
    # AWS_DEFAULT_REGION=[secure]
    - secure: "KQyb92LmAK4YNeAQ884Qd9hDDyFZ8D9n2XxO07ihplAa9azQ+BeHYXpeFOUof0SaVZsHAiWy9ssN8PCOOTJFsktsQFu/2uzyDG62cuwYTDq0tO+KBawFH7VaOwOVfRSu5A3VfixcdiV9BR63al7GaQ1zTsCgoqUcOqZG3fPNjsn2N35Sc6qpezEYCjBp+3l4uuYEg9a6smnitohBhPhABW7gmGh1YP/kMjvHGIFJFNixYPlbsjAzkDVEkZMHHCxCmcpi7agRNB8Wdd/3ZirY/yZbz7OxVMgqyYS0PuOz+leM6KW0Iqt78O8FBKFXz12yqDBPlyMM8iZCtJSM0wmOFjgXA2P26cpSf6j5WCAAhcA41H3tQyEhPZ3U/3bVxw5BXiwDpBFkyIJgNwynvS71BQRdkqfMRIQgmKN9gZ1m0Sl68U7PDNHreh2N374bbRMS0fd2rIB6AmhgngkUvMajYxMGvCVzxbdc+GPKB0jYybraDGu3RAX38nhNUU65AHnQlZ3bK97R7Rl4fd2t9f/NndRZagygwKb84Og2NNdaDzJe8zh8X9/kEowODGILKHgAK6f3OfxeBHRbKVw6HLtMct+Pt/XkMAjGy6ZbO/9L4eZbpY6Yn6Oys3bnVBYNZ0ofgpeDIiPsGKaA26+bKZ6lMZ9dT7i0fNtGoOaWVUOnoEQ="
    # CODECLIMATE_REPO_TOKEN=[secure]
    - secure: "pHrdFjBrvl0+trM8a7nNdDWMzcVj4AAQoRrZeizR/TO5T5rFH1CcaGah7T8Ba9ADSQ4Ox0YBsC+/k73bcxi5J2GBMMI+5W5lg3AOJKKjuM7SQdWwT96i6amRWIGXZdZZUMQlaIKWDVGgEmTNn2vqYm8HivJSfHExuwCufLaWVTgWuRhd9X2dxdoWhtYvUqesrrXToelhM1X8nzWYrm1pq98VTIxUbQcdRUhKsFaHtxlw5fS3wJq02ypr1HLuyu4EMUHf08JbX9Co9ShMa0aIrsnG/kVfiRjUe/xp0+OEBycLgilQVm8JUSOUFP9YWfUd/wZzYT312g+0/EsoBd4JgNxCgm418PjtIXNjsZUhU476GOWMjMZdpRhRx80mRp6yloI9dFMKn/59SwrjT2YAszkfGkbXj3oVr44H832IbrOb8IsMS2ZzoixM9A6nufv/usK6LFYKqNVmL9V7AWEM/Mx2f9C9cydaOoGiIruvwtycya8f8IXpfX3H+uNhzyTJpfN7XJ8/VQAitQT6ZuWHHNdQW7ianpIncATvC7I+ug0ZfEu6mSHi+3gFyGV2XcSE4SK3hSaeIxdE1lwxYJuueYUZrjYk36sR6KmXuWIxBuA2AW6Kh0a3t5f0IWlsETc94hmQX/Xj2jt/jfiCZtKqcB9QMBMildM3Py7D12gH+ik="
    # SNYK_API_TOKEN=[secure]
    - secure: "2JPC0REuWYuboiwb+D9u3/ghqGVZWTaOLBRUCXuFvglEd+pgYNLIwZ4m4wFGPnMoRWWQpcoHvm4mZ+8hpZdwRYqFUeYk9rWV/0c/9HgqYO63F10KYUKQU5X/J/7Titz94u6uTJvg/OfqUgEyILlWoVsIb/lMZKxb5k9RIR+2g9U+QvVYMXbj8phmpcZ+KlFprhzcirgHY5MXx1cjKu0ijIN3nhF9KRS0BDV/4uRbjigVHY+Q3BuiUskYLfRufn9my3O1wP6cki1ZT7VUqbduyTov0Odsa/zJCQWSTOj3xiZCHH9ul0AWayH36pIdUzjkwoV6jrXj5hgUuf+LyDSmP/5GnUcqSVtDBVCEa9ctmZsWHnesddFZsGXtSNocLiOf+5FCO96EDub7ahUJt1ZKFSwfxX1z35wYstYUFRP0Gv9wDVmzeecktNz8aYo+2vP9tGzHioGtzoIf7+Hj3ysDYnw0lbhsRS1gLD1nOuFfk6QPxHx6KDJLOY3a+D0DQw2xDzfxMe3XE6JY30iWqIs/UbQhcOpSuV2RkLplU04WLi5ScRZhvp6piE4IUSRScOMGao3lmyyCOIjY05vcBN99KAEqkU8igd87U55Ne10ElwgsbE18Lpkso85a5PA/lhEp5ZnnJNpyXPEOArBBR4St6firkQ7LNWBhxclaeqzffcY="

stage: "Run Unit Tests :clipboard:"
node_js:
  - 6
  - 8
before_install:
  - npm install -g recink
  - npm install -g recink-codeclimate
  - npm install -g recink-snyk
script:
  - recink run unit -c recink-codeclimate -c recink-snyk
