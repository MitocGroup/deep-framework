language: node_js
sudo: required
git:
  depth: 1
cache:
  bundler: true
  directories:
    - node_modules
    - "$(npm root -g)"
    - "$(npm config get prefix)/bin"
branches:
  only:
    - master
    - stage
    - test
    - dev
env:
  global:
    - DEEP_NO_INTERACTION=1
    # AWS_ACCOUNT_ID=[secure]
    - secure: "A8xGRRv80jyGkz9i52ZWR1G5S2syoct/KtCjPCaqlmXxwAo7qY+4mvFv2ARPGTmyPm2frKAHQCEN0kUWXBTioCqSGjvGtATCu9QkGarnqDFyCzBaILuK/rsWcI8jW0ALKf8ycjjzs5z3qNbem+whPQmZshx8YyaX0DucQNBfVIfT1uBNOTL4oPmxqWhXWMzASAQlG2ojfduiI0OFbZrIjIcQ7gY2pYKU/KdJj563hVc7XpeuN1lVylgTcgQIlgtf84W5qGewpbNuPQOrAFpdk+6nGzKiL0Vx6icjRk21Lh0N1R71CV0CkLAXzgc0y/JtkDf9KJM6auDs5EHEnw2lJxV+nA+L6T0446KmrZsahwa1aWf1UxxK4Xpd3QCjjXhEx0oALqP+v+7yLVSvIY/JgTVjITGA925Y5NEvjlH5jVkcQruJ2aBKP36p5ofvflQkdItYhq7OvxQt1Eg0Ra6P3uLnEieU0+P4kPE2YDKym9sZESIDNyMfLQ3xE3weNXf+WVbfZD5fCtXMqHqk4x4mdUvvh2vtl7H49cTGj9vs3ztToiKIcOUnyfOrw7/+lYV8nGJUEZynafu8gTZuZZ+3btpjjRh/mar3g7H7ly397bNM51VufMSwl2/5rFoCEqhHKHo3id4F0/lIwnGgd1e7s3nFOTCWMqcoqcHOirAGMNw="
    # AWS_ACCESS_KEY_ID=[secure]
    - secure: "TuFWniA1nKx1+3kallbxRGl4AWRBrdHKR9CptsP1+3kwuefJbPJb5BfMunSXwtPS0aY/wWXA53xo9itebF+UwsFODNQNnXIr5lPBHL8wxBDkz9fj9sXtKbgbN2Hk/fxtwOeOzw5LRhj/N7VepP4tDxaexUBG8KsuDdpCarUoHoXthyhD1bm9cgn9/SLaCt94+ZLw7Kz0qma8Dcu+GYqBnCnTXVYQ3eoqvUm2rTuW90W++22BJPk/zPiWU9JS0V3Habpqwyw5HG9/04g/pSW6COn8sp1NeTIRCwDctLSxvI2tOcL+a4V38yUDAyHwOX2mQm71uhtTwSoKxgUIF6/Ujw3sYyW5lLtsNF4BG0Q9Q/3r9gl2LmrdeBLC62FJwl+qkb51gSxyQ/WN3s42Bg2ZR+Tyj95WvIJms9NYpsTd3V6CxSOWpDMCrq8rnB6198+iMri5Cl8PIhYhqfYkkY6vrwlbyZ42dH1VQkoNxHWxdWxWdHrj6SgH73dJi6mTkB70hu1t/SSh3p+eK/Ok3S9KTcUdjU3m3D28MYN5a466TnbNksbPnZmRWa7mDIkTpoytdoJoS2kRLVqDqm1iW27CByhtP4Vb0XbX5L+mZ9PsgfBQBe1rsXqAJRW7C9souCdkVuuHic0f6mMf+9PRjUd2SzMhnbFgxn1zwx0me3xQMW0="
    # AWS_SECRET_ACCESS_KEY=[secure]
    - secure: "EpsbKN4aZUvlrdVjQUxKawyKq/sB7LBBR2bWra+f2YC6nYMDQlryNflcRbroOV8YhstRsK+DegSWeFNoeXjgv6pUqJCocyRG7qu0W/pkk2GOtzz1j6Vos2gXmKT4uvADft4YkDkuiCIqSpmYvO4al/Xjy2+bAhrUihh2cIvwD9jiw9fuZa3YZmcdvu1gEYkjUIE19+0Tv/tE3Ar2eKYIp7d8LTv4y1ckPSNGLl9SD+yMxwFGEnhLKswJ33dN93Vv5RkXBhso7xDyqfYrDZ98wVrmvI7/L5bExcDwG7D3MeXZ6k3miA2lEV5ErIZ26CEvAyuxuIx9bJsdre4flTuY/72VjYPJV4J+cIPqq0gfWX1UkxtKoOM1tOS++2z0DGNczZnijfkDaX7VIVEgLiiwE80hOzb9EArQDymyNpom5hOuLTl0DrkH61R3VYIa5UR4OdRZhIhQP2K5M3qLXuMqf1NwvKDkc8n5ahTGKo2VXNz8wk7Yi5qspAI6ezUP64AhxZKiedLE4xRD4XkddVlLz+fotO6NJAsGwDRZjT9iJsMKALFZmPQtzWZtsLdhpugSLiTYYin7ggdLRdDcu+k+rgtj5tfg2YGDWemOLkIlCojDtyB4bqb56IXK5Mz6FiutryVvDl9Wcmbj2kfweF45aob/zB7eJ09e1PQn/UyxUkU="
    # AWS_DEFAULT_REGION=[secure]
    - secure: "KQyb92LmAK4YNeAQ884Qd9hDDyFZ8D9n2XxO07ihplAa9azQ+BeHYXpeFOUof0SaVZsHAiWy9ssN8PCOOTJFsktsQFu/2uzyDG62cuwYTDq0tO+KBawFH7VaOwOVfRSu5A3VfixcdiV9BR63al7GaQ1zTsCgoqUcOqZG3fPNjsn2N35Sc6qpezEYCjBp+3l4uuYEg9a6smnitohBhPhABW7gmGh1YP/kMjvHGIFJFNixYPlbsjAzkDVEkZMHHCxCmcpi7agRNB8Wdd/3ZirY/yZbz7OxVMgqyYS0PuOz+leM6KW0Iqt78O8FBKFXz12yqDBPlyMM8iZCtJSM0wmOFjgXA2P26cpSf6j5WCAAhcA41H3tQyEhPZ3U/3bVxw5BXiwDpBFkyIJgNwynvS71BQRdkqfMRIQgmKN9gZ1m0Sl68U7PDNHreh2N374bbRMS0fd2rIB6AmhgngkUvMajYxMGvCVzxbdc+GPKB0jYybraDGu3RAX38nhNUU65AHnQlZ3bK97R7Rl4fd2t9f/NndRZagygwKb84Og2NNdaDzJe8zh8X9/kEowODGILKHgAK6f3OfxeBHRbKVw6HLtMct+Pt/XkMAjGy6ZbO/9L4eZbpY6Yn6Oys3bnVBYNZ0ofgpeDIiPsGKaA26+bKZ6lMZ9dT7i0fNtGoOaWVUOnoEQ="
    # CODECLIMATE_REPO_TOKEN=[secure]
    - secure: "AhLUDwmx6ZGfiv65Iiz1zSuFyxSVrYqIMLLtMR/ysnI+OnIjY+DhUy7EBEmwxI46/naxR4kPDFM3ScfGZpbXXGUt2AH2DIPD+3LPl32JlJV2OOc/AYq+Fssa4yxuqEsLBqZCzvfNaHcOhRlhcabCy1bBDSamhcGJJSwhHyYCSC4KK/a75RnJFqIzv2gr9P8sEhO2F6yIZkUD+CXDJBxZuM0WT/VF00c+USq50X/IA15kkURQnTTH88AnMV3IQhcxFaO4dVJhFhC2yVzdLK8pyVtjaBXQmNoLlSWrhnd2Ab2UvEOPCjDIYD8RqAA1JT1ORf+dIiKWUKDlykJx9QE7j7i1V2yYGtpSZe2hYowzGTb071jSfdOX4tT5JFSCq724cYH/rjl7yqzsg1S9mxRuSUJB+9JTTDDtchpH9SZ7ysFKZ6buaaE1Zqbw7exYO+3ODhfWh++n99wbYcJJU8f8ZflD1iSj2ncxIziKMYpbnH6m0bwkmCXADTEyRG52DKFvPODfzctIdW73rCyLlvgNtQ827vikG86H5CMiM+Jp31d2DdPTi+JiP/9Nn1/KBOKOOXkpvPctRpcuNAgWrkpd0SpfJfRwHY+qhZx9GOBKQoVp4A7tj+vy8xpVMTU5AZp7gZ6a88WHjdfWFvEMzaQgPswCwz6lEcN5YdftCA3ZzWE="
    # SNYK_API_TOKEN=[secure]
    - secure: "2JPC0REuWYuboiwb+D9u3/ghqGVZWTaOLBRUCXuFvglEd+pgYNLIwZ4m4wFGPnMoRWWQpcoHvm4mZ+8hpZdwRYqFUeYk9rWV/0c/9HgqYO63F10KYUKQU5X/J/7Titz94u6uTJvg/OfqUgEyILlWoVsIb/lMZKxb5k9RIR+2g9U+QvVYMXbj8phmpcZ+KlFprhzcirgHY5MXx1cjKu0ijIN3nhF9KRS0BDV/4uRbjigVHY+Q3BuiUskYLfRufn9my3O1wP6cki1ZT7VUqbduyTov0Odsa/zJCQWSTOj3xiZCHH9ul0AWayH36pIdUzjkwoV6jrXj5hgUuf+LyDSmP/5GnUcqSVtDBVCEa9ctmZsWHnesddFZsGXtSNocLiOf+5FCO96EDub7ahUJt1ZKFSwfxX1z35wYstYUFRP0Gv9wDVmzeecktNz8aYo+2vP9tGzHioGtzoIf7+Hj3ysDYnw0lbhsRS1gLD1nOuFfk6QPxHx6KDJLOY3a+D0DQw2xDzfxMe3XE6JY30iWqIs/UbQhcOpSuV2RkLplU04WLi5ScRZhvp6piE4IUSRScOMGao3lmyyCOIjY05vcBN99KAEqkU8igd87U55Ne10ElwgsbE18Lpkso85a5PA/lhEp5ZnnJNpyXPEOArBBR4St6firkQ7LNWBhxclaeqzffcY="

stage: "Run Unit Tests :clipboard:"
node_js:
  - 6
  - 8
before_install:
  - npm install chai
  - npm install -g recink
  - npm install -g recink-codeclimate
  - npm install -g recink-snyk
script:
  - recink run unit -c recink-codeclimate -c recink-snyk